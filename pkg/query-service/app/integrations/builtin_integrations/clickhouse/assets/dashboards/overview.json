{
  "id": "clickhouse-overview",
  "description": "This dashboard provides a high-level overview of your Clickhouse databases.",
  "layout": [
    {
      "h": 3,
      "i": "540305be-453b-4a1b-a7d1-c7c0869cc23d",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 6,
      "y": 9
    },
    {
      "h": 3,
      "i": "b3fc0734-d263-4e85-821d-bf70fd583221",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 0,
      "y": 9
    },
    {
      "h": 3,
      "i": "0ecd6754-0dbd-4f3a-87fc-d4bae230b587",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 6,
      "y": 2
    },
    {
      "h": 2,
      "i": "d0195b81-4b1b-4638-80de-e73ca3ec112e",
      "moved": false,
      "static": false,
      "w": 12,
      "x": 0,
      "y": 0
    },
    {
      "h": 3,
      "i": "98864cbd-a2c5-4b85-b24f-0cc0cbd3547f",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 0,
      "y": 2
    },
    {
      "h": 2,
      "i": "7ea956e6-6d34-4ff4-a2fe-08a7fae782ef",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 0,
      "y": 5
    },
    {
      "h": 2,
      "i": "74cfdcbb-ac11-4358-8ea7-b6764a588956",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 6,
      "y": 5
    },
    {
      "h": 2,
      "i": "8846c4d3-32d0-48ef-968d-95640dd08386",
      "moved": false,
      "static": false,
      "w": 12,
      "x": 0,
      "y": 7
    }
  ],
  "name": "",
  "tags": [
    "v2",
    "per-pod"
  ],
  "title": "Clickhouse Overview",
  "uploadedGrafana": false,
  "variables": {
    "9253a091-4bdc-43e1-b9ba-6f37315c2576": {
      "allSelected": false,
      "customValue": "",
      "description": "List of hosts sending Clickhouse metrics",
      "id": "9253a091-4bdc-43e1-b9ba-6f37315c2576",
      "key": "host_name",
      "modificationUUID": "ccf282b7-0e5e-4033-81a8-25dde4c3508e",
      "multiSelect": false,
      "name": "host_name",
      "order": 0,
      "queryValue": "SELECT JSONExtractString(labels, 'host_name') AS host_name\nFROM signoz_metrics.distributed_time_series_v4_1day\nWHERE metric_name = 'ClickHouseMetrics_VersionInteger'\nGROUP BY host_name",
      "selectedValue": "",
      "showALLOption": true,
      "sort": "DISABLED",
      "textboxValue": "",
      "type": "QUERY"
    }
  },
  "widgets": [
    {
      "description": "",
      "id": "8846c4d3-32d0-48ef-968d-95640dd08386",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "9b6b2ec7-b4c6-4a02-b841-770676a7be5c",
        "promql": [
          {
            "disabled": false,
            "legend": "Query",
            "name": "A",
            "query": "rate(ClickHouseProfileEvents_Query{host_name=\"{{.host_name}}\"}[5m])"
          },
          {
            "disabled": false,
            "legend": "SelectQuery",
            "name": "B",
            "query": "rate(ClickHouseProfileEvents_SelectQuery{host_name=\"{{.host_name}}\"}[5m])"
          },
          {
            "disabled": false,
            "legend": "InsertQuery",
            "name": "C",
            "query": "rate(ClickHouseProfileEvents_InsertQuery{host_name=\"{{.host_name}}\"}[5m])"
          },
          {
            "disabled": false,
            "legend": "AsyncInsertQuery",
            "name": "D",
            "query": "rate(ClickHouseProfileEvents_AsyncInsertQuery{host_name=\"{{.host_name}}\"}[5m])"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Successful Queries",
      "yAxisUnit": "none"
    },
    {
      "description": "",
      "id": "74cfdcbb-ac11-4358-8ea7-b6764a588956",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "7a87c4ca-1c35-44fd-baf1-b63389c22615",
        "promql": [
          {
            "disabled": false,
            "legend": "FailedQuery",
            "name": "A",
            "query": "rate(ClickHouseProfileEvents_FailedQuery{host_name=\"{{.host_name}}\"}[5m])"
          },
          {
            "disabled": false,
            "legend": "FailedSelectQuery",
            "name": "B",
            "query": "rate(ClickHouseProfileEvents_FailedSelectQuery{host_name=\"{{.host_name}}\"}[5m])"
          },
          {
            "disabled": false,
            "legend": "FailedInsertQuery",
            "name": "C",
            "query": "rate(ClickHouseProfileEvents_FailedInsertQuery{host_name=\"{{.host_name}}\"}[5m])"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Failed queries",
      "yAxisUnit": "none"
    },
    {
      "description": "",
      "id": "7ea956e6-6d34-4ff4-a2fe-08a7fae782ef",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "4143e29a-9bf2-40da-b2a1-8aa3a9d2f962",
        "promql": [
          {
            "disabled": false,
            "legend": "RejectedInserts",
            "name": "A",
            "query": "rate(ClickHouseProfileEvents_RejectedInserts{host_name=\"{{.host_name}}\"}[5m])"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "",
      "yAxisUnit": "none"
    },
    {
      "description": "",
      "id": "98864cbd-a2c5-4b85-b24f-0cc0cbd3547f",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "6596f535-a858-4180-bc5b-77da88593fa0",
        "promql": [
          {
            "disabled": false,
            "legend": "{{host_name}}",
            "name": "A",
            "query": "ClickHouseMetrics_MemoryTracking{host_name=\"{{.host_name}}\"}"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Memory usage",
      "yAxisUnit": "decbytes"
    },
    {
      "description": "",
      "id": "d0195b81-4b1b-4638-80de-e73ca3ec112e",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "f0e3282a-2e28-4d0c-9545-a0f689d598d1",
        "promql": [
          {
            "disabled": false,
            "legend": "TCP",
            "name": "A",
            "query": "ClickHouseMetrics_TCPConnection{host_name=\"{{.host_name}}\"}"
          },
          {
            "disabled": false,
            "legend": "HTTP",
            "name": "B",
            "query": "ClickHouseMetrics_HTTPConnection{host_name=\"{{.host_name}}\"}"
          },
          {
            "disabled": false,
            "legend": "MYSQL",
            "name": "C",
            "query": "ClickHouseMetrics_MySQLConnection{host_name=\"{{.host_name}}\"}"
          },
          {
            "disabled": false,
            "legend": "POSTGRES",
            "name": "D",
            "query": "ClickHouseMetrics_PostgreSQLConnection{host_name=\"{{.host_name}}\"}"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Active connections",
      "yAxisUnit": "none"
    },
    {
      "description": "",
      "id": "0ecd6754-0dbd-4f3a-87fc-d4bae230b587",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "be065d1c-7781-4627-8a0d-61552795a52a",
        "promql": [
          {
            "disabled": false,
            "legend": "received",
            "name": "A",
            "query": "rate(ClickHouseProfileEvents_NetworkReceiveBytes{host_name=\"{{.host_name}}\"}[5m])"
          },
          {
            "disabled": false,
            "legend": "sent",
            "name": "B",
            "query": "rate(ClickHouseProfileEvents_NetworkSendBytes{host_name=\"{{.host_name}}\"}[5m])"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Network received/sent bytes",
      "yAxisUnit": "decbytes"
    },
    {
      "description": "",
      "id": "b3fc0734-d263-4e85-821d-bf70fd583221",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "isJSON": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "931707fd-780e-425d-adbc-01f069dc6a3a",
        "promql": [
          {
            "disabled": false,
            "legend": "merges",
            "name": "A",
            "query": "rate(ClickHouseProfileEvents_Merge{host_name=\"{{.host_name}}\"}[5m])"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Number of launched background merges.",
      "yAxisUnit": "none"
    },
    {
      "description": "",
      "id": "540305be-453b-4a1b-a7d1-c7c0869cc23d",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "",
                "id": "------false",
                "isColumn": false,
                "key": "",
                "type": ""
              },
              "aggregateOperator": "count",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": " {{host_name}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 60
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": ""
          }
        ],
        "id": "7c2c1650-0348-41c7-b162-1cc391d77f73",
        "promql": [
          {
            "disabled": false,
            "legend": " {{host_name}}",
            "name": "A",
            "query": "rate(ClickHouseProfileEvents_MergesTimeMilliseconds{host_name=\"{{.host_name}}\"}[5m])"
          }
        ],
        "queryType": "promql"
      },
      "thresholds": [],
      "timePreferance": "GLOBAL_TIME",
      "title": "Total time spent for background merges.",
      "yAxisUnit": "ms"
    }
  ],
  "uuid": "be5a5c4b-a456-441d-bd58-b9db91b15583"
}